<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>E-Commerce 2023 Holiday Quiz</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0f172a; /* slate-900 */
            color: #f1f5f9; /* slate-100 */
            overflow-x: hidden;
            -webkit-tap-highlight-color: transparent;
        }

        /* Snow Animation */
        .snowflake {
            position: fixed;
            top: -20px;
            background: white;
            border-radius: 50%;
            pointer-events: none;
            z-index: 0;
        }

        @keyframes fall {
            0% { transform: translateY(-10vh) translateX(0px); }
            100% { transform: translateY(110vh) translateX(20px); }
        }

        /* Lights Animation */
        @keyframes twinkle {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.5; transform: scale(0.8); }
        }

        .light {
            animation: twinkle 1.5s infinite;
        }

        /* Utility for fade in */
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Better tap behavior on mobile buttons */
        button {
            touch-action: manipulation;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center">

    <!-- Snow Container -->
    <div id="snow-container"></div>

    <!-- Christmas Lights -->
    <div class="w-full flex justify-center py-3 z-10">
        <div id="lights-container" class="flex space-x-3 md:space-x-8"></div>
    </div>

    <div class="z-10 w-full max-w-2xl px-3 sm:px-4 pb-12 mt-2 sm:mt-4">
        <!-- Header -->
        <div class="text-center mb-6 sm:mb-8">
            <h1 class="text-2xl sm:text-3xl md:text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-red-400 to-green-400 drop-shadow-sm mb-1 sm:mb-2">
                E-Commerce 2023
            </h1>
            <div class="flex items-center justify-center space-x-1 sm:space-x-2 text-slate-300 text-xs sm:text-sm">
                <!-- Gift Icon Left -->
                <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 sm:w-6 sm:h-6 text-red-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M20 12a1 1 0 00-1-1v-2.5a.5.5 0 00-.5-.5h-2.293a1 1 0 00-.707.293l-1.647 1.647a.5.5 0 00-.146.353V12a1 1 0 00-1 1v4.5a.5.5 0 00.5.5h2.293a1 1 0 00.707-.293l1.647-1.647a.5.5 0 00.146-.353V16.5a1 1 0 001-1V12z" />
                    <path stroke-linecap="round" stroke-linejoin="round" d="M4 12a1 1 0 011-1v-2.5a.5.5 0 01.5-.5h2.293a1 1 0 01.707.293l1.647 1.647a.5.5 0 01.146.353V12a1 1 0 01-1 1v4.5a.5.5 0 01-.5.5H6.293a1 1 0 01-.707-.293l-1.647-1.647a.5.5 0 01-.146-.353V16.5a1 1 0 01-1-1V12z" />
                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 3v18" />
                    <path stroke-linecap="round" stroke-linejoin="round" d="M3 12h18" />
                </svg>
                <span class="text-sm sm:text-base font-semibold">Holiday Exam Edition</span>
                <!-- Gift Icon Right -->
                <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 sm:w-6 sm:h-6 text-green-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M20 12a1 1 0 00-1-1v-2.5a.5.5 0 00-.5-.5h-2.293a1 1 0 00-.707.293l-1.647 1.647a.5.5 0 00-.146.353V12a1 1 0 00-1 1v4.5a.5.5 0 00.5.5h2.293a1 1 0 00.707-.293l1.647-1.647a.5.5 0 00.146-.353V16.5a1 1 0 001-1V12z" />
                    <path stroke-linecap="round" stroke-linejoin="round" d="M4 12a1 1 0 011-1v-2.5a.5.5 0 01.5-.5h2.293a1 1 0 01.707.293l1.647 1.647a.5.5 0 01.146.353V12a1 1 0 01-1 1v4.5a.5.5 0 01-.5.5H6.293a1 1 0 01-.707-.293l-1.647-1.647a.5.5 0 01-.146-.353V16.5a1 1 0 01-1-1V12z" />
                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 3v18" />
                    <path stroke-linecap="round" stroke-linejoin="round" d="M3 12h18" />
                </svg>
            </div>
        </div>

        <!-- Quiz Container -->
        <div id="quiz-card" class="bg-white/10 backdrop-blur-md rounded-2xl p-4 sm:p-6 md:p-8 shadow-2xl border border-white/10 min-h-[380px] sm:min-h-[400px]">
            
            <!-- Progress Section -->
            <div id="progress-section" class="mb-4 sm:mb-6">
                <div class="flex justify-between text-[11px] sm:text-sm text-slate-400 mb-2">
                    <span id="question-tracker">Question 1 of 30</span>
                    <span id="score-tracker">Score: 0</span>
                </div>
                <div class="w-full bg-slate-700 rounded-full h-2">
                    <div id="progress-bar" class="bg-gradient-to-r from-red-500 to-green-500 h-2 rounded-full transition-all duration-300" style="width: 0%"></div>
                </div>
            </div>

            <!-- Question Text -->
            <div id="question-container" class="mb-5 sm:mb-8">
                <h3 id="question-text" class="text-lg sm:text-xl md:text-2xl font-semibold leading-relaxed fade-in">
                    Loading Question...
                </h3>
            </div>

            <!-- Options -->
            <div id="options-container" class="space-y-2.5 sm:space-y-3">
                <!-- Options injected here -->
            </div>

            <!-- Explanation & Next Button Area -->
            <div id="feedback-area" class="mt-5 sm:mt-6 hidden fade-in">
                <div id="explanation-box" class="p-3 sm:p-4 rounded-xl mb-4 sm:mb-6 border">
                    <p id="feedback-title" class="font-semibold mb-1 text-xs sm:text-sm uppercase tracking-wider opacity-70">Correct!</p>
                    <p id="explanation-text" class="text-slate-200 text-sm sm:text-base">Explanation text goes here.</p>
                </div>
                <button id="next-btn" class="w-full flex items-center justify-center space-x-2 bg-gradient-to-r from-red-600 to-red-500 hover:from-red-500 hover:to-red-400 text-white font-bold py-3 sm:py-3.5 px-4 sm:px-6 rounded-xl transition-all transform hover:scale-[1.02] active:scale-[0.99]">
                    <span id="next-btn-text">Next Question</span>
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
                    </svg>
                </button>
            </div>

            <!-- Results Section (Hidden initially) -->
            <div id="results-section" class="hidden text-center py-8 fade-in">
                <div class="inline-block p-4 rounded-full bg-slate-800/50 mb-4">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-14 h-14 sm:w-16 sm:h-16 text-yellow-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z" />
                    </svg>
                </div>
                <h2 class="text-2xl sm:text-3xl font-bold mb-3 sm:mb-4">Quiz Complete!</h2>
                <p class="text-lg sm:text-xl mb-4 sm:mb-6">
                    You scored <span id="final-score" class="font-bold text-green-400">0</span> out of <span id="total-questions" class="font-bold">30</span>
                </p>
                
                <div id="final-message" class="mb-6 sm:mb-8 text-base sm:text-lg"></div>

                <button onclick="restartQuiz()" class="flex items-center justify-center space-x-2 bg-gradient-to-r from-green-600 to-green-500 hover:from-green-500 hover:to-green-400 text-white font-bold py-3 sm:py-3.5 px-6 sm:px-8 rounded-full transition-all transform hover:scale-105 active:scale-[0.99] mx-auto">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
                    </svg>
                    <span>Take Quiz Again</span>
                </button>
            </div>

        </div>

        <div class="text-center mt-6 sm:mt-8 text-slate-500 text-xs sm:text-sm">
            Based on "E-Commerce 2023" by Laudon &amp; Traver
        </div>
    </div>

    <script>
        // --- DATA ---
        const questions = [
            {
                question: "1. Which of the following best distinguishes e-commerce from e-business?",
                options: [
                    { text: "E-commerce is internal; e-business is external.", isCorrect: false },
                    { text: "E-commerce involves digitally enabled commercial transactions between organizations and individuals; e-business involves internal digital processes.", isCorrect: true },
                    { text: "E-commerce is limited to retail; e-business covers everything else.", isCorrect: false },
                    { text: "There is no distinction.", isCorrect: false },
                ],
                explanation: "E-commerce focuses on revenue-generating transactions with outside parties, while e-business focuses on internal efficiency."
            },
            {
                question: "2. The feature of e-commerce technology that allows it to be available everywhere (work, home, mobile) is called:",
                options: [
                    { text: "Richness", isCorrect: false },
                    { text: "Ubiquity", isCorrect: true },
                    { text: "Interactivity", isCorrect: false },
                    { text: "Global Reach", isCorrect: false },
                ],
                explanation: "Ubiquity means the marketspace is available everywhere, removing physical location as a constraint."
            },
            {
                question: "3. Which unique feature of e-commerce technology allows merchants to target marketing messages to specific individuals based on their interests?",
                options: [
                    { text: "Personalization/Customization", isCorrect: true },
                    { text: "Information Density", isCorrect: false },
                    { text: "Universal Standards", isCorrect: false },
                    { text: "Richness", isCorrect: false },
                ],
                explanation: "Personalization allows for tailoring messages and products to specific individuals."
            },
            {
                question: "4. The lowering of information entry costs and the ability for consumers to find prices easily describes which feature?",
                options: [
                    { text: "Information Density", isCorrect: true },
                    { text: "Interactivity", isCorrect: false },
                    { text: "Social Technology", isCorrect: false },
                    { text: "Ubiquity", isCorrect: false },
                ],
                explanation: "Information density refers to the total amount and quality of information available to all market participants."
            },
            {
                question: "5. Which term describes the displacement of market middlemen (distributors, wholesalers) by a direct relationship between manufacturers and consumers?",
                options: [
                    { text: "Network Effects", isCorrect: false },
                    { text: "Disintermediation", isCorrect: true },
                    { text: "Friction-free Commerce", isCorrect: false },
                    { text: "First Mover Advantage", isCorrect: false },
                ],
                explanation: "Disintermediation removes the 'middleman,' allowing direct sales."
            },
            {
                question: "6. A company that offers basic services for free but charges for premium features is using which revenue model?",
                options: [
                    { text: "Subscription", isCorrect: false },
                    { text: "Freemium", isCorrect: true },
                    { text: "Affiliate", isCorrect: false },
                    { text: "Transaction Fee", isCorrect: false },
                ],
                explanation: "Freemium builds a user base with free tools and monetizes advanced features (e.g., Spotify, Dropbox)."
            },
            {
                question: "7. eBay is a prime example of which B2C business model?",
                options: [
                    { text: "E-tailer", isCorrect: false },
                    { text: "Portal", isCorrect: false },
                    { text: "Market Creator", isCorrect: true },
                    { text: "Content Provider", isCorrect: false },
                ],
                explanation: "Market Creators build a digital environment where buyers and sellers can meet and transact."
            },
            {
                question: "8. Which revenue model involves fees for referring business to other sites?",
                options: [
                    { text: "Sales Revenue", isCorrect: false },
                    { text: "Affiliate Revenue", isCorrect: true },
                    { text: "Subscription Revenue", isCorrect: false },
                    { text: "Advertising Revenue", isCorrect: false },
                ],
                explanation: "Affiliate models pay commissions for referrals (e.g., blogs linking to Amazon products)."
            },
            {
                question: "9. 'First-mover advantage' refers to:",
                options: [
                    { text: "The first person to buy a product.", isCorrect: false },
                    { text: "A competitive market advantage for a firm that results from being the first into a marketplace.", isCorrect: true },
                    { text: "Moving a website to a new server first.", isCorrect: false },
                    { text: "The first country to regulate the internet.", isCorrect: false },
                ],
                explanation: "Being first allows a firm to build brand name and shut out competitors, though it comes with risks."
            },
            {
                question: "10. Which business model provides a digital environment where users can search, find news, and access email (e.g., Yahoo, MSN)?",
                options: [
                    { text: "Portal", isCorrect: true },
                    { text: "Community Provider", isCorrect: false },
                    { text: "Transaction Broker", isCorrect: false },
                    { text: "Service Provider", isCorrect: false },
                ],
                explanation: "Portals serve as a gateway to the internet, aggregating content and services."
            },
            {
                question: "11. Which protocol is the foundation of the Internet, governing how data is packetized and addressed?",
                options: [
                    { text: "HTTP", isCorrect: false },
                    { text: "TCP/IP", isCorrect: true },
                    { text: "FTP", isCorrect: false },
                    { text: "HTML", isCorrect: false },
                ],
                explanation: "Transmission Control Protocol/Internet Protocol (TCP/IP) is the core communications protocol."
            },
            {
                question: "12. The method of slicing digital messages into parcels, sending them along different paths, and reassembling them is called:",
                options: [
                    { text: "Circuit Switching", isCorrect: false },
                    { text: "Packet Switching", isCorrect: true },
                    { text: "Broadcasting", isCorrect: false },
                    { text: "Multiplexing", isCorrect: false },
                ],
                explanation: "Packet switching is more efficient than circuit switching for bursty data traffic."
            },
            {
                question: "13. What is the primary difference between IPv4 and IPv6?",
                options: [
                    { text: "IPv6 is slower but more secure.", isCorrect: false },
                    { text: "IPv6 allows for a vastly larger number of IP addresses.", isCorrect: true },
                    { text: "IPv4 is for mobile devices only.", isCorrect: false },
                    { text: "IPv6 does not use numbers.", isCorrect: false },
                ],
                explanation: "IPv6 uses 128-bit addresses to solve the exhaustion of IPv4's 32-bit address space."
            },
            {
                question: "14. A model of computing where firms obtain computing power and software over the Internet rather than managing their own hardware is:",
                options: [
                    { text: "Client/Server", isCorrect: false },
                    { text: "Cloud Computing", isCorrect: true },
                    { text: "Mainframe Computing", isCorrect: false },
                    { text: "Edge Computing", isCorrect: false },
                ],
                explanation: "Cloud computing (IaaS, PaaS, SaaS) allows renting resources like AWS or Azure."
            },
            {
                question: "15. Which markup language is used to create the structure and content of web pages?",
                options: [
                    { text: "CSS", isCorrect: false },
                    { text: "Java", isCorrect: false },
                    { text: "HTML", isCorrect: true },
                    { text: "Python", isCorrect: false },
                ],
                explanation: "HyperText Markup Language (HTML) defines the structure of web content."
            },
            {
                question: "16. Which security dimension ensures that information has not been altered by an unauthorized party?",
                options: [
                    { text: "Confidentiality", isCorrect: false },
                    { text: "Integrity", isCorrect: true },
                    { text: "Availability", isCorrect: false },
                    { text: "Privacy", isCorrect: false },
                ],
                explanation: "Integrity guarantees the data sent is the data received, without modification."
            },
            {
                question: "17. 'Non-repudiation' refers to:",
                options: [
                    { text: "Keeping data secret.", isCorrect: false },
                    { text: "The inability to deny having performed an action or transaction.", isCorrect: true },
                    { text: "Preventing website crashes.", isCorrect: false },
                    { text: "Encrypting passwords.", isCorrect: false },
                ],
                explanation: "Non-repudiation provides proof of the origin of data and protects against false denial of a transaction."
            },
            {
                question: "18. A cyberattack that floods a server with traffic to crash it is called:",
                options: [
                    { text: "Phishing", isCorrect: false },
                    { text: "SQL Injection", isCorrect: false },
                    { text: "Ransomware", isCorrect: false },
                    { text: "DDoS (Distributed Denial of Service)", isCorrect: true },
                ],
                explanation: "DDoS attacks aim to make a service unavailable by overwhelming it with requests."
            },
            {
                question: "19. Which technology serves as the distributed ledger for cryptocurrencies like Bitcoin?",
                options: [
                    { text: "NFC", isCorrect: false },
                    { text: "Blockchain", isCorrect: true },
                    { text: "ACH", isCorrect: false },
                    { text: "RFID", isCorrect: false },
                ],
                explanation: "Blockchain is a decentralized, immutable ledger system."
            },
            {
                question: "20. What is a 'digital wallet' (e.g., Apple Pay, Google Pay)?",
                options: [
                    { text: "A physical device for storing coins.", isCorrect: false },
                    { text: "Software that stores credit card and other information to facilitate payment.", isCorrect: true },
                    { text: "A cryptocurrency exchange.", isCorrect: false },
                    { text: "A bank account.", isCorrect: false },
                ],
                explanation: "Digital wallets store credentials to simplify and secure the checkout process."
            },
            {
                question: "21. 'Clickstream behavior' tracks:",
                options: [
                    { text: "Mouse clicks only.", isCorrect: false },
                    { text: "The exact path a consumer takes through a website.", isCorrect: true },
                    { text: "Email open rates.", isCorrect: false },
                    { text: "Social media likes.", isCorrect: false },
                ],
                explanation: "Clickstream data reveals the user's journey, time spent on pages, and navigation patterns."
            },
            {
                question: "22. Automated, auction-based buying of ad inventory in real-time is known as:",
                options: [
                    { text: "Programmatic Advertising", isCorrect: true },
                    { text: "Native Advertising", isCorrect: false },
                    { text: "Direct Marketing", isCorrect: false },
                    { text: "Viral Marketing", isCorrect: false },
                ],
                explanation: "Programmatic advertising uses algorithms and RTB (Real Time Bidding) to buy ad space instantly."
            },
            {
                question: "23. Which EU regulation mandates strict data privacy protections for individuals?",
                options: [
                    { text: "DMCA", isCorrect: false },
                    { text: "GDPR", isCorrect: true },
                    { text: "COPPA", isCorrect: false },
                    { text: "HIPAA", isCorrect: false },
                ],
                explanation: "The General Data Protection Regulation (GDPR) is the toughest privacy and security law in the world."
            },
            {
                question: "24. 'Net Neutrality' is the principle that:",
                options: [
                    { text: "Internet access should be free.", isCorrect: false },
                    { text: "ISPs should treat all data equally without discrimination.", isCorrect: true },
                    { text: "All websites should look the same.", isCorrect: false },
                    { text: "Governments should own the internet.", isCorrect: false },
                ],
                explanation: "Net Neutrality opposes throttling, blocking, or paid prioritization of internet traffic."
            },
            {
                question: "25. Which form of intellectual property protects original works of authorship (books, music, code)?",
                options: [
                    { text: "Patent", isCorrect: false },
                    { text: "Trademark", isCorrect: false },
                    { text: "Copyright", isCorrect: true },
                    { text: "Trade Secret", isCorrect: false },
                ],
                explanation: "Copyright protects expression of ideas (literary, musical, dramatic, etc.) for a specific duration."
            },
            {
                question: "26. 'Bricks-and-clicks' refers to:",
                options: [
                    { text: "Online-only stores.", isCorrect: false },
                    { text: "Physical stores that also have an online presence.", isCorrect: true },
                    { text: "Construction companies.", isCorrect: false },
                    { text: "Social media influencers.", isCorrect: false },
                ],
                explanation: "It describes the omni-channel strategy of traditional retailers adding e-commerce channels."
            },
            {
                question: "27. The 'Right to Be Forgotten' allows individuals to:",
                options: [
                    { text: "Delete all their emails.", isCorrect: false },
                    { text: "Request removal of personal data from search results.", isCorrect: true },
                    { text: "Change their legal name.", isCorrect: false },
                    { text: "Avoid paying taxes.", isCorrect: false },
                ],
                explanation: "Primarily in the EU, this allows users to ask for outdated or irrelevant personal info to be de-indexed."
            },
            {
                question: "28. What is 'Dynamic Pricing'?",
                options: [
                    { text: "Changing prices based on real-time demand and supply.", isCorrect: true },
                    { text: "Setting one price for all customers.", isCorrect: false },
                    { text: "Giving discounts to new users only.", isCorrect: false },
                    { text: "Using foreign currency.", isCorrect: false },
                ],
                explanation: "Used by Uber (surge pricing) and airlines, prices fluctuate instantly based on market conditions."
            },
            {
                question: "29. Which of the following refers to the set of standards for B2B document exchange (invoices, purchase orders)?",
                options: [
                    { text: "ERP", isCorrect: false },
                    { text: "CRM", isCorrect: false },
                    { text: "EDI (Electronic Data Interchange)", isCorrect: true },
                    { text: "SQL", isCorrect: false },
                ],
                explanation: "EDI is the legacy standard for automated B2B transactions."
            },
            {
                question: "30. The 'Long Tail' in e-commerce refers to:",
                options: [
                    { text: "Selling a few hit products to many people.", isCorrect: false },
                    { text: "Selling a large number of unique items in small quantities.", isCorrect: true },
                    { text: "The time it takes to ship a product.", isCorrect: false },
                    { text: "A type of network cable.", isCorrect: false },
                ],
                explanation: "E-commerce allows retailers (like Amazon) to stock obscure items profitably, serving the 'long tail' of the demand curve."
            },
        ];

        // --- STATE ---
        let currentQuestionIndex = 0;
        let score = 0;
        let isAnswered = false;

        // --- ELEMENTS ---
        const snowContainer = document.getElementById('snow-container');
        const lightsContainer = document.getElementById('lights-container');
        const questionTracker = document.getElementById('question-tracker');
        const scoreTracker = document.getElementById('score-tracker');
        const progressBar = document.getElementById('progress-bar');
        const questionText = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        const feedbackArea = document.getElementById('feedback-area');
        const feedbackTitle = document.getElementById('feedback-title');
        const explanationText = document.getElementById('explanation-text');
        const explanationBox = document.getElementById('explanation-box');
        const nextBtn = document.getElementById('next-btn');
        const nextBtnText = document.getElementById('next-btn-text');
        const progressSection = document.getElementById('progress-section');
        const resultsSection = document.getElementById('results-section');
        const finalScore = document.getElementById('final-score');
        const totalQuestionsSpan = document.getElementById('total-questions');
        const finalMessage = document.getElementById('final-message');
        const quizCard = document.getElementById('quiz-card');

        // --- INIT ---
        function init() {
            createSnowflakes();
            createLights();
            renderQuestion();
        }

        // --- SNOWFLAKES ---
        function createSnowflakes() {
            const count = window.innerWidth < 640 ? 30 : 50; // fewer on mobile
            for (let i = 0; i < count; i++) {
                const flake = document.createElement('div');
                flake.classList.add('snowflake');
                const size = Math.random() * 10 + 5;
                flake.style.width = `${size}px`;
                flake.style.height = `${size}px`;
                flake.style.left = `${Math.random() * 100}%`;
                flake.style.opacity = Math.random() * 0.5 + 0.3;
                
                const duration = Math.random() * 3 + 2;
                const delay = Math.random() * 5;
                flake.style.animation = `fall ${duration}s linear infinite -${delay}s`;
                
                snowContainer.appendChild(flake);
            }
        }

        // --- LIGHTS ---
        function createLights() {
            const colors = ['bg-red-500 shadow-red-500/50', 'bg-green-500 shadow-green-500/50', 'bg-yellow-400 shadow-yellow-400/50'];
            const lightCount = window.innerWidth < 640 ? 8 : 12;
            for (let i = 0; i < lightCount; i++) {
                const light = document.createElement('div');
                const colorClass = colors[i % 3];
                light.className = `light w-3 h-3 sm:w-4 sm:h-4 md:w-6 md:h-6 rounded-full shadow-lg ${colorClass}`;
                light.style.animationDelay = `${i * 0.2}s`;
                lightsContainer.appendChild(light);
            }
        }

        // --- QUIZ LOGIC ---
        function renderQuestion() {
            const q = questions[currentQuestionIndex];
            
            // Text
            questionText.innerText = q.question;
            questionTracker.innerText = `Question ${currentQuestionIndex + 1} of ${questions.length}`;
            scoreTracker.innerText = `Score: ${score}`;
            
            // Progress Bar
            const progress = ((currentQuestionIndex + 1) / questions.length) * 100;
            progressBar.style.width = `${progress}%`;

            // Clear Options
            optionsContainer.innerHTML = '';
            
            // Generate Options
            q.options.forEach((opt) => {
                const btn = document.createElement('button');
                btn.className = "w-full text-left p-3 sm:p-4 rounded-xl border border-slate-700 bg-slate-800/50 hover:bg-slate-700 hover:border-slate-500 transition-all duration-200 flex items-center justify-between group text-sm sm:text-base";
                
                const span = document.createElement('span');
                span.innerText = opt.text;
                span.className = "pr-2";
                btn.appendChild(span);

                btn.onclick = () => handleAnswer(opt, btn);
                optionsContainer.appendChild(btn);
            });

            // Reset UI
            feedbackArea.classList.add('hidden');
            optionsContainer.classList.remove('pointer-events-none');
            isAnswered = false;
            
            // Update button text logic
            if (currentQuestionIndex === questions.length - 1) {
                nextBtnText.innerText = "See Results";
            } else {
                nextBtnText.innerText = "Next Question";
            }
        }

        function handleAnswer(selectedOption, btnElement) {
            if (isAnswered) return;
            isAnswered = true;

            const isCorrect = selectedOption.isCorrect;
            
            // Visuals
            if (isCorrect) {
                score++;
                btnElement.className = "w-full text-left p-3 sm:p-4 rounded-xl border border-green-500 bg-green-500/20 text-green-200 transition-all flex items-center justify-between text-sm sm:text-base";
                // Add Check Icon
                btnElement.innerHTML += `<svg class="w-5 h-5 flex-shrink-0 text-green-400 ml-2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" /></svg>`;
                
                // Feedback Box Style
                explanationBox.className = "p-3 sm:p-4 rounded-xl mb-4 sm:mb-6 border bg-green-900/30 border-green-500/30";
                feedbackTitle.innerText = "CORRECT!";
            } else {
                btnElement.className = "w-full text-left p-3 sm:p-4 rounded-xl border border-red-500 bg-red-500/20 text-red-200 transition-all flex items-center justify-between text-sm sm:text-base";
                 // Add X Icon
                 btnElement.innerHTML += `<svg class="w-5 h-5 flex-shrink-0 text-red-400 ml-2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" /></svg>`;
                
                // Feedback Box Style
                explanationBox.className = "p-3 sm:p-4 rounded-xl mb-4 sm:mb-6 border bg-red-900/30 border-red-500/30";
                feedbackTitle.innerText = "INCORRECT";

                // Highlight correct answer
                const allButtons = optionsContainer.querySelectorAll('button');
                questions[currentQuestionIndex].options.forEach((opt, idx) => {
                    if(opt.isCorrect) {
                        allButtons[idx].classList.add('border-green-500', 'bg-green-500/10', 'text-green-200');
                    }
                });
            }

            // Show Explanation
            explanationText.innerText = questions[currentQuestionIndex].explanation;
            feedbackArea.classList.remove('hidden');
            
            // Disable clicks
            optionsContainer.classList.add('pointer-events-none');
            
            // Update score display immediately
            scoreTracker.innerText = `Score: ${score}`;
        }

        nextBtn.onclick = () => {
            if (currentQuestionIndex < questions.length - 1) {
                currentQuestionIndex++;
                renderQuestion();
            } else {
                showResults();
            }
        };

        function showResults() {
            progressSection.classList.add('hidden');
            questionText.parentElement.classList.add('hidden'); // container hidden
            optionsContainer.classList.add('hidden');
            feedbackArea.classList.add('hidden');
            resultsSection.classList.remove('hidden');

            finalScore.innerText = score;
            totalQuestionsSpan.innerText = questions.length;

            if (score >= 27) {
                finalMessage.innerHTML = `<span class="text-green-300">üéÑ Outstanding! You're an E-Commerce Expert! üéÑ</span>`;
            } else if (score >= 20) {
                finalMessage.innerHTML = `<span class="text-yellow-300">‚õÑ Great job! You know your stuff. ‚õÑ</span>`;
            } else {
                finalMessage.innerHTML = `<span class="text-red-300">‚ùÑÔ∏è Keep studying and try again! ‚ùÑÔ∏è</span>`;
            }
        }

        window.restartQuiz = function() {
            currentQuestionIndex = 0;
            score = 0;
            resultsSection.classList.add('hidden');
            progressSection.classList.remove('hidden');
            questionText.parentElement.classList.remove('hidden');
            optionsContainer.classList.remove('hidden');
            renderQuestion();
        }

        // Run Init
        init();

    </script>
</body>
</html>